전염병 확산 시뮬레이션 (동적 이벤트 기반 SIRVQ-D 모델)

이 프로그램은 격자 기반의 SIRVQ-D(Susceptible, Infected, Recovered, Vaccinated, Quarantined, Deceased) 모델을 사용하여 전염병의 확산을 시뮬레이션합니다. 특히, 시뮬레이션 도중 특정 조건이 충족되면 정부의 대응(봉쇄, 백신 캠페인)이 동적으로 시작되는 이벤트 기반 시스템을 특징으로 합니다. 모든 UI는 한국어로 제공됩니다.

상태 설명

*   ■ Susceptible (감염 가능성이 있는 사람)
*   ■ Infected (감염된 사람)
*   ■ Recovered (회복된 사람)
*   ■ Vaccinated (백신 접종으로 면역된 사람)
*   ■ Quarantined (격리된 사람)
*   ■ Deceased (사망한 사람)

## 사용 방법

1.  **필요 라이브러리 설치**

    `install_dependencies.bat` 파일을 실행하여 `matplotlib` 라이브러리를 설치하세요.

2.  **시뮬레이션 실행 (GUI 모드)**

    `py sir_model.py`를 실행하면, 가장 먼저 **시뮬레이션 설정 창**이 나타납니다.

    *   **시나리오 선택:** 폴더에 있는 `.json` 파일 목록이 드롭다운 메뉴에 자동으로 나타납니다. 원하는 국가 시나리오를 선택하세요.
    *   **격자 크기 조절:** 시나리오를 선택하면 해당 설정의 기본 격자 크기가 자동으로 입력됩니다. 원한다면 직접 수정할 수 있습니다.
    *   **바이러스 속성 조절:** '바이러스 잠재력' 값에 따라 '확산률'과 '치사율'이 반비례 관계를 가지도록 슬라이더로 조절할 수 있습니다. 확산률을 올리면 치사율이 내려가는 시소처럼 작동하여, 현실적인 바이러스 변이를 시뮬레이션할 수 있습니다.
    *   **시작:** '시뮬레이션 시작' 버튼을 누르면 시뮬레이션이 진행되고, 완료 후 분석 창이 나타납니다.

3.  **시뮬레이션 실행 (배치 모드)**

    `py sir_model.py --batch` 명령어로 실행하면, GUI 창 없이 기본 `config.json`에 설정된 값으로 시뮬레이션이 즉시 실행되고 결과물(`simulation_stats.png`, `simulation_stats.csv`)이 자동으로 저장됩니다.

4.  **대화형 컨트롤러 사용법**

    *   **뉴스 기록 (좌측):** 시뮬레이션 도중 발생한 주요 이벤트(방역 단계 조정 등)가 최신순으로 5개까지 누적되어 표시됩니다.
    *   **Generation 슬라이더:** 재생 바 역할을 합니다. 슬라이더를 움직여 원하는 시간(세대)으로 자유롭게 이동할 수 있습니다. **붉은 세로선**은 주요 뉴스가 발생한 시점을 의미합니다.
    *   **Play/Pause 버튼:** 시뮬레이션 자동 재생을 시작하거나 일시 정지합니다.
    *   **Save Results 버튼:** 통계 그래프를 이미지 파일로, 시뮬레이션 전체 기록을 CSV 파일로 저장합니다.
    *   **핵심 결과 지표 (Key Metrics):** 총사망자, 최대 감염자 수 등의 핵심 정보가 결과 창에 텍스트로 표시됩니다.

## 모델 파라미터 및 시나리오

### 파라미터 수정

각 시나리오의 세부 파라미터는 해당 `.json` 파일을 직접 수정하여 변경할 수 있습니다.

#### 기본 파라미터
*   `GRID_WIDTH` / `GRID_HEIGHT`: 격자 가로/세로 크기 (GUI 모드의 기본값, 배치 모드용)
*   `INITIAL_INFECTED`: 초기 감염자 수
*   `INFECTION_RATE`: 기본 감염률
*   `RECOVERY_RATE`: 회복률
*   `WANING_IMMUNITY_RATE`: (감염 후 회복된) 면역 상실률
*   `BREAKTHROUGH_RATE_MODIFIER`: 돌파 감염 계수
*   `VACCINE_WANING_MODIFIER`: 백신 면역 감소 계수
*   `HOSPITAL_CAPACITY_THRESHOLD`: 의료 시스템 수용 한계 (감염/격리자 비율)
*   `BASE_DEATH_RATE`: 기본 사망률
*   `OVERWHELMED_DEATH_RATE_MULTIPLIER`: 의료 시스템 과부하 시 사망률 배수
*   `VACCINATION_START_THRESHOLD`: 백신 캠페인 시작 임계값 (감염자+사망자 비율)
*   `DAILY_VACCINATION_RATE`: 캠페인 시작 후 일일 백신 접종률

#### 바이러스 속성 파라미터
*   `TOTAL_VIRULENCE_POTENTIAL`: 바이러스의 총 잠재력을 정의합니다. GUI 설정 창의 '확산률'과 '치사율'의 합은 이 값을 넘지 않도록 연동되어 움직입니다.

#### 방역 대응 시스템 파라미터
*   `LOCKDOWN_STRATEGY`: 국가의 핵심 방역 전략을 선택합니다. (`"ZERO_COVID"`, `"REGIONAL"`, `"NONE"` 중 선택)
    *   `"ZERO_COVID"`: 단 한 명의 감염자라도 발생 시, 감염자가 0이 될 때까지 최고 방역 단계(5단계)를 유지하는 '제로 코로나' 전략입니다. (예: 중국)
    *   `"REGIONAL"`: 특정 방역 단계 도달 시, 감염 밀집 지역(핫스팟)을 찾아 봉쇄하는 '지역 봉쇄' 전략입니다. (예: 이탈리아)
    *   `"NONE"`: 별도의 특수 봉쇄 없이, 감염자 수에 따른 방역 단계 조절만으로 대응하는 일반 전략입니다. (예: 대한민국, 미국 등)
*   `RESPONSE_DELAY`: 감염률이 임계값을 넘은 후, 실제 방역 단계가 조정되기까지 걸리는 시간(세대)입니다. 국가별 대응 속도를 조절합니다.
*   `ALERT_LEVELS`: 1~5단계의 방역 단계를 정의합니다. 단계별 `threshold_down` 값들은 실제 역사적 사실을 반영하여 매우 보수적으로(낮게) 설정되어, 단계 완화가 어렵도록 조정되었습니다.
    *   **각 단계의 하위 파라미터:**
        *   `threshold_up`: 다음 단계로 **격상**하기 위한 감염자 비율 임계값.
        *   `threshold_down`: 이전 단계로 **완화**하기 위한 감염자 비율 임계값.
        *   `social_distancing`: 해당 단계에서 적용될 사회적 거리두기 강도 (0.0 ~ 1.0).
        *   `quarantine_rate`: 해당 단계에서 적용될 감염자 격리율 (0.0 ~ 1.0).

#### 동적 지역 봉쇄 파라미터
*   `REGIONAL_LOCKDOWN_TRIGGER_LEVEL`: `LOCKDOWN_STRATEGY`가 `"REGIONAL"`일 때, 이 파라미터에 설정된 방역 단계에 도달하면 지역 봉쇄를 1회 실행합니다. (팁: 이 값을 5보다 큰 수(예: 6)로 설정하면, 해당 시나리오에서 지역 봉쇄 기능이 사실상 비활성화됩니다.)
*   `REGIONAL_LOCKDOWN_DETECTION_RADIUS`: 핫스팟을 찾기 위해 감염자 밀도를 측정하는 반경입니다.
*   `REGIONAL_LOCKDOWN_RADIUS`: 찾아낸 핫스팟의 중심에 실제 봉쇄를 적용할 반경입니다.

#### 동적 지역 봉쇄 파라미터
*   `REGIONAL_LOCKDOWN_TRIGGER_LEVEL`: 이 파라미터에 설정된 방역 단계에 도달했을 때, 감염 밀집 지역(핫스팟)을 찾아 지역 봉쇄를 1회 실행합니다. (단계가 6 이상이면 비활성화)
*   `REGIONAL_LOCKDOWN_DETECTION_RADIUS`: 핫스팟을 찾기 위해 감염자 밀도를 측정하는 반경입니다.
*   `REGIONAL_LOCKDOWN_RADIUS`: 찾아낸 핫스팟의 중심에 실제 봉쇄를 적용할 반경입니다.

### 새로운 시나리오 추가 방법

1.  기존의 `example_config_korea.json`과 같은 파일을 복사합니다.
2.  파일 이름을 `example_config_새이름.json` 형식으로 변경합니다.
3.  파일 내부의 파라미터 값들을 원하는 대로 수정합니다.
4.  프로그램을 다시 실행하면, '시나리오 선택' 드롭다운 메뉴에 새로 추가한 시나리오가 자동으로 나타납니다.

### 시나리오별 특징

*   **대한민국 (korea):** 빠른 대응 속도와 높은 시민 참여, 강력한 방역 조치 및 신속한 백신 캠페인 전개를 반영합니다.
*   **일본 (japan):** 상대적으로 신중하고 점진적인 대응과 낮은 강도의 봉쇄를 반영합니다.
*   **중국 (china):** 감염 초기에 매우 빠르고 강력하게 최고 수준까지 대응하며, 핫스팟을 즉시 봉쇄하는 전략을 반영합니다.
*   **미국 (usa):** 주별로 다른 정책과 개인의 자유를 중시하는 경향으로 인해 대응 속도가 느리고, 단계 격상 기준이 높은 것을 반영합니다.
*   **아프리카 (africa):** 대륙 전체 평균으로, 의료 인프라 부족과 더딘 백신 캠페인 시작 상황을 반영합니다.
*   **이탈리아 (italy):** 팬데믹 초기 의료 시스템 붕괴와 길고 강력한 지역 봉쇄 조치를 반영합니다.
*   **영국 (uk):** 초기 대응의 변화와 빠른 백신 접종 캠페인을 반영하며, 특정 상황에서의 지역 봉쇄 가능성을 열어둡니다.
*   **인도 (india):** 폭발적인 감염자 급증과 의료 시스템의 심각한 과부하, 그리고 일부 대도시 봉쇄 상황을 반영합니다.
*   **브라질 (brazil):** 높은 감염률과 함께 방역 정책에 대한 지속적인 사회적 갈등으로 인해 지역 봉쇄가 거의 이루어지지 않은 상황을 반영합니다.
*   **스웨덴 (sweden):** 강력한 봉쇄 없이 자발적 거리두기에 의존했던 독특한 전략을 반영합니다.